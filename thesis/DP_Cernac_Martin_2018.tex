% hidelinks remove colour boxes around hyperlinks
\documentclass[thesis=M,czech]{FITthesis}[2012/10/20]

\usepackage[utf8]{inputenc} % LaTeX source encoded as UTF-8
\usepackage{graphicx} %graphics files inclusion
\usepackage{amsmath} %advanced maths
\usepackage{amssymb} %additional math symbols
\usepackage{dirtree}
\usepackage{pdfpages}

% % list of acronyms
% \usepackage[acronym,nonumberlist,toc,numberedsection=autolabel]{glossaries}
% \iflanguage{czech}{\renewcommand*{\acronymname}{Seznam pou{\v z}it{\' y}ch zkratek}}{}
% \makeglossaries

\department{Katedra počítačových systémů}
\title{Komunikace skrze Captive portal}
\authorGN{Martin} %(křestní) jméno (jména) autora
\authorFN{Černáč} %příjmení autora
\authorWithDegrees{Bc. Martin Černáč} %jméno autora včetně akademických titulů
\author{Martin Černáč} %jméno autora bez akademických titulů
\supervisor{Ing. Aleš Padrta, Ph. D.}
\acknowledgements{Rád bych poděkoval svému vedoucímu za cenné rady, věcné připomínky a vstřícnost při konzultacích.}
\abstractCS{TODO V~několika větách shrňte obsah a přínos této práce v~češtině. Po přečtení abstraktu by měl mít čtenář dost informací pro rozhodnutí, zda chce Vaši práci číst.}
\abstractEN{TODO Sem doplňte ekvivalent abstraktu Vaší práce v~angličtině.}
\placeForDeclarationOfAuthenticity{V~Praze}
\declarationOfAuthenticityOption{4} %volba Prohlášení
\keywordsCS{Závěrečná práce, \LaTeX{}.}
\keywordsEN{Thesis, \LaTeX{}.}
\website{https://github.com/octaroot/CTU-FIT-MasterThesis} %volitelná URL práce, objeví se v tiráži


%dobre zdroje
%https://www.secplicity.org/2016/08/26/lessons-defcon-2016-bypassing-captive-portals/
%https://en.wikipedia.org/wiki/Captive_portal
%https://www.ietf.org/mail-archive/web/captive-portals/current/threads.html#00090

%seznam sw reseni
%https://mohammadthalif.wordpress.com/2010/12/14/list-of-open-source-captive-portal-software-and-network-access-control-nac/

%jak captive skodi a jak to delat nejlepe
%https://www.eff.org/deeplinks/2017/08/how-captive-portals-interfere-wireless-security-and-privacy

%ukazkova byznys stranka, ktera vychvaluje svuj captive sw ... lol
%prvni argument je uplne mimo, na podvrzene HTML strance neni nic legitniho, uplna blbost
%treti argument zminuje tracking uzivatele diky vynuceni loginu skrze socialni site, nebo email (chapu to tak, ze tam proste dam adresu a pusti me dal)
%https://www.securedgenetworks.com/blog/why-is-a-captive-portal-important-for-wireless-guest-access

\begin{document}

\begin{introduction}
Bezdrátové sítě se staly zcela běžným prostředkem mezilidské komunikace. Účastníci bezdrátové sítě mají možnost vyměňovat si navzájem informace a nebýt přitom omezeni kabelovým spojením. Pozitivním důsledkem je tedy zvýšená mobilita účastníků. Ta vedla k vlně popularity mobilních telefonů, využívajících bezdrátovou síť \textit{GSM}.

S rostoucími nároky uživatelů prošly běžně dostupné bezdrátové sítě rozsáhlým vývojem (vyšší prostupnost, nižší latence a další aspekty). Mezi dlouhodobě populární a rozšířené typy bezdrátových sítí se řadí technologie \textit{Wi-Fi}. Jedná se o technologii podporovanou širokým spektrem spotřební elektroniky (například televizory, tiskárny, mobilní telefony nebo počítače). Provozování \textit{Wi-Fi} sítě je díky bezlicenčnímu pásmu \textit{ISM} snadné a na trhu je dostupná celá řada produktů, zajišťující provoz takové sítě.

Z těchto důvodů došlo k velkému rozmachu takzvaných \textit{hotspotů}, tedy veřejně přístupných míst s pokrytím \textit{Wi-Fi} sítě. Taková Wi-Fi síť je zpravidla snadno přístupná a účastníkům nabízí přístup do sítě Internet. Ačkoliv je velice snadné začít s provozem \textit{hotspotu}, je nutné dbát na další aspekty provozu takové služby -- zejména právní aspekty.

Účastníci \textit{hotspotu} by měli být srozuměni s pravidly používání konkrétní sítě, limitovanou odpovědností provozovatele a před začátkem užívání sítě doložit svůj souhlas s pravidly. Provozovatel navíc může mít zájem o některé informace o uživatelích \textit{hotspotu}, případně po jisté době používání službu zpoplatnit.

Technologie \textit{Wi-Fi} však sama o sobě neumožňuje nic z výše uvedeného. Takovou situaci lze vyřešit například zapojením recepce v prostředí hotelu (uživatel písemně vyjádří souhlas s pravidly používání sítě, recepční vydá přístupové údaje do sítě). Častěji se však setkáváme s automatizovaným přístupem, realizovaným pomocí \textit{captive portálu} (z angličtiny \textit{Captive portal}).

Řešení s pomocí \textit{captive portálu} spočívá v detekci nově připojeného účastníka, informování o pravidlech provoz sítě a výzvu k jejich odsouhlasení účastníkem. Všechny následné interakce účastníka se sítí \textit{captive portál} ignoruje a nezasahuje do nich.

Z principu věci musí být \textit{captive portál} schopen \textbf{nejprve zasahovat do veškerého síťového provozu} (účastník doposud nedoložil souhlas s pravidly, neměl by mít možnost síť využívat) a \textbf{následně do provozu konkrétního účastníka nezasahovat vůbec}. Existuje celá řada technologických postupů pro docílení popsaného efektu. Mnohé z nich jsou však neefektivní a spoléhají na součinnost účastníka.

Právě proto jsem se rozhodl vypracovat diplomovou práci na téma obcházení \textit{captive portálu}, zdůrazňující jejich technologickou nedokonalost a poukázat na lepší řešení řízení síťového přístupu (\textit{Network Access Control}).

V této práci se proto budu zabývat popisem problematiky \textit{captive portálů} a obecnými způsoby jejich obcházení. Jako demonstraci technologické nedokonalosti užití \textit{captive portálu} pro zajištění řízení síťového přístupu rovněž navrhnu a implementuji protokol s důrazem na maximální prostupnost. Implementovaný protokol otestuji a provedu srovnání s dostupnými nástroji pro obcházení \textit{captive portálů}.
\end{introduction}

\chapter{Analýza současné situace}

Tato kapitola se věnuje problematice \textit{captive portálů}, motivací jejich nasazení v síti a častými problémy s používáním \textit{captive portálu} jako nástroje pro zajištění řízení síťového přístupu.


\section{test}











% 
% co to je captive portal. jak je mozne ho realizovat (DNS/L3 ICMP/preklad *:80 na muj server -- casto zarizeni po pripojeni zkusi nacist nejakou well-known URL ktera by mela vratit HTTP 204)
% 
% proc to mame. legislativa provozu hotspotu. lidi odslouhlasi podminky sluzby, kryju se tim ja jako provozovatel -- nabizim jim sluzbu, ktera neni sofrovana.
% captive portal na dedikovane guest wifina: oddeleni guest trafficu, snazsi omezeni sirky pasma, data collection -- jaci lide se pripojuji na muj hotspot ... muzu napriklad nabidnou prihlaseni pres FB/jinou soc. sit.
% 
% technicke problemy. je potreba prohlizec, ten ale spousta zarizeni proste nema (herni konzole Nintendo DS napr) -- resi se to \texttt{WISPr}. User je casto identifikovan pouze MAC/IP kombem -> sniff -> spoof.
% 
% netechnicke problemy. podvrzene ssl certy uci uzivatele klikat na ``ano, ano, verim vsemu, hlavne at jede FB''.
% 
% proc je to na nic. casto podvrhavane certifikaty, aby bylo mozne dostat uzivatle na loginpage. V podstate MITM! Nutnost zadat email, pravdepodobne za ucelem SPAMovani. Nekdy je nutne i shlednout videoreklamu ala youtube/iprima.
% 
% jak se to da obejit. DNS/ICMP tunely, VoIP SIP porty obcas otevrene, web caching proxy 3128. mozna dokonce SSH 22?
% 
% jak se to da delat jinak - 802.1x kdyz uz mame ucty .. wifi treba v kavarne kdyz si neco dam, to si umim predstavit.
% 
% kdyz to nejde jinak, tak jak alespon lepe -- viz EFF article v sources/ -- napr neblokovat detekci captive portalu (HTTP 204 responses obvykle (No Content) -- protoze pak OS vetsinou nabidne nejaky osekany browser, ve kterem se otevre login form, coz snizuje pst. nejakeho leaku dat.

% SSH spojeni, MUX (parsuje TCP stream a prenasi jen data po TCP(via SSH tunel)
% pro muj ucel nepouzitelne, ale zajiamve
% https://github.com/apenwarr/sshuttle


% pokud budu diskutovat kmitocty ISM pasma, ČTÚ ma na webu hezky popsany smernice odkud co a proc je bezlicencni atd.

% jak captive detekuje chormium
% https://www.chromium.org/chromium-os/chromiumos-design-docs/network-portal-detection

\chapter{Návrh řešení}

Doplňte vhodný text.

\chapter{Implementace}

Doplňte vhodný text.

\chapter{Testování}

Doplňte vhodný text.


\begin{conclusion}
	Doplňte závěr.
	
\end{conclusion}

\bibliographystyle{csn690}
\bibliography{literatura}

\appendix

\chapter{Seznam použitých zkratek}
% \printglossaries



%TODO sort a-z
\begin{description}
	\item[DNS] Domain Name System
	\item[ICMP] Internet Control Message Protocol
	\item[XML] Extensible markup language
	\item[ISM] Industrial, Scientific and Medical radio bands -- kmitočty pro použití v průmyslu, vědě a medicíně
	\item[NAC] Network Access Control -- řízení síťového přístupu
	\item[GSM] Global System for Mobile Communications -- Globální Systém pro Mobilní komunikaci
\end{description}


% % % % % % % % % % % % % % % % % % % % % % % % % % % 
% Tuto kapitolu z výsledné práce ODSTRAŇTE.
% % % % % % % % % % % % % % % % % % % % % % % % % % % 


\section{Použití šablony}

Šablona je určena pro zpracování systémem \LaTeXe{}. (Začátečníci v~\LaTeX{}u mohou využít např. \cite{rybicka}.) Text je možné psát v~textovém editoru jako prostý text, lze však také využít specializovaný editor pro \LaTeX{}, např. Kile.

Pro získání tisknutelného výstupu z~takto vytvořeného souboru použijte příkaz \verb|pdflatex|, kterému předáte cestu k~souboru jako parametr. Vhodný editor pro \LaTeX{} toto udělá za Vás. \verb|pdfcslatex| ani \verb|cslatex| \emph{nebudou} s~těmito šablonami fungovat.

\subsection{Typografie}

Při psaní dodržujte typografické konvence zvoleného jazyka. Česky psané \uv{uvozovky} zapisujte použitím příkazu \verb|\uv|, kterému v~parametru předáte text, jenž má být v~uvozovkách. Anglické otevírací uvozovky se v~\LaTeX{}u zadávají jako dva zpětné apostrofy, uzavírací uvozovky jako dva apostrofy. Často chybně uváděný symbol "{} (palce) nemá s~uvozovkami nic společného.

Dále je třeba zabránit zalomení řádky mezi některými slovy, v~češtině např. za jednopísmennými předložkami a spojkami (vyjma \uv{a}) nebo mezi číslicí a měrnou jednotkou. To docílíte vložením pružné nezalomitelné mezery -- znakem \texttt{\textasciitilde}. V~tomto případě to není třeba dělat ručně, lze použít program \verb|vlna|.

Nezapomeňte také na rozlišení \uv{vodorovných čárek}, které je dáno nejen typografickými zvyklostmi, ale i pravidly českého pravopisu. Pro dělení slov (na konci řádku) nebo jejich spojování nebo v~rámci složenin používejte rozdělovník (v~\LaTeX{}u se zapisuje jako \verb|-|), naopak pomlčku (v~\LaTeX{}u zapsanou jako \verb|--|) užívejte pro význam rozmezí nebo rozsahu a nebo jako větnou pomlčku (namísto interpunkce). Zcela jiným znakem je též mínus (ve stejné výšce a stejné délky jako vodorovná čárka znaku plus), v~\LaTeX{}u se zapisuje pouze v~matematickém režimu.

Více o~typografii viz \cite{kobltypo}.

\subsection{Obrázky}

Pro umožnění vkládání obrázků je vhodné použít balíček \verb|graphicx|, samotné vložení se provede příkazem \verb|\includegraphics|. Takto je možné vkládat obrázky ve formátu PDF, PNG a JPEG jestliže používáte pdf\LaTeX{} nebo ve formátu EPS jestliže používáte \LaTeX{}. Doporučujeme preferovat vektorové obrázky před rastrovými (vyjma fotografií).

\subsubsection{Formáty grafiky}

Z~hlediska reprezentace obrazových informací existuje dělení grafických formátů na rastrové a vektorové. Ty první reprezentují obrázek pomocí barev jednotlivých bodů, ty druhé pomocí informací (souřadnice, barva) o~částech obrázků (úsečka, polygon, plocha). Z~toho plyne vhodnost formátů pro určitý obsah: rastrové pro fotografie, vektorové pro snadno popsatelné obrázky (zejména ty, které obsahují text, jasné tvary apod.). Mezi vektorové souborové formáty patří např. PDF, EPS, SVG, WMF; rastrové obrázky lze najít v~souborech typu PNG, JPEG, GIF, TIFF.

Rastrové obrázky neumožňují, na rozdíl od vektorových, zvětšení beze ztráty vizuálně postřehnutelné kvality. Vzhledem k~vlastnostem grafických formátů a nárokům na vzhled (zejména) vytištěné práce důrazně doporučujeme využít vektorovou grafiku pro všechny obrázky znázorňující typický vektorový obsah (např. diagramy) a rastrové využívat pouze pro fotografie. Důsledně se pro vektorový obsah vyvarujte vkládání grafiky využívající ztrátovou kompresi (JPEG)! Vkládáte-li už do práce rastrovou grafiku, dbejte na dostatečné rozlišení (300 dpi je naprosté minimum). Z~tohoto důvodu je většina obrázků získaných z~webu nevhodná.

\subsubsection{Získání vhodného formátu}

Pro získání vektorových formátů PDF nebo EPS z~jiných lze použít některý z~vektorových grafických editorů. Pro převod rastrového obrázku na vektorový lze použít rasterizaci, kterou mnohé editory zvládají (např. Inkscape). Pro konverze lze použít též nástroje pro dávkové zpracování běžně dodávané s~\LaTeX{}em, např. \verb|epstopdf|. Běžný formát SVG (specifikace viz \cite{svgspec}) sice není možné vkládat přímo (zatím), konverzi však zvládne řada vektorových grafických editorů.

\subsubsection{Plovoucí prostředí}

Příkazem \verb|\includegraphics| lze obrázky vkládat přímo, doporučujeme však použít plovoucí prostředí, konkrétně \verb|figure|. Například obrázek \ref{fig:float} byl vložen tímto způsobem. Vůbec přitom nevadí, když je obrázek umístěn jinde, než bylo původně zamýšleno -- je tomu tak hlavně kvůli dodržení typografických konvencí. Namísto vynucování konkrétní pozice obrázku doporučujeme používat odkazování z~textu (dvojice příkazů \verb|\label| a \verb|\ref|).

\begin{figure}\centering
	\includegraphics[width=0.5\textwidth, angle=30]{cvut-logo-bw}
	\caption[Příklad obrázku]{Ukázkový obrázek v~plovoucím prostředí}\label{fig:float}
\end{figure}

\subsubsection{Verze obrázků}

% Gnuplot BW i barevně
Může se hodit mít více verzí stejného obrázku, např. pro barevný či černobílý tisk a nebo pro prezentaci. S~pomocí některých nástrojů na generování grafiky je to snadné.

Máte-li například graf vytvořený v~programu Gnuplot, můžete jeho černobílou variantu (viz obr. \ref{fig:gnuplot-bw}) vytvořit parametrem \verb|monochrome dashed| příkazu \verb|set term|. Barevnou variantu (viz obr. \ref{fig:gnuplot-col}) vhodnou na prezentace lze vytvořit parametrem \verb|colour solid|.


\subsection{Tabulky}

Tabulky lze zadávat různě, např. v~prostředí \verb|tabular|, avšak pro jejich vkládání platí to samé, co pro obrázky -- použijte plovoucí prostředí, v~tomto případě \verb|table|. Například tabulka \ref{tab:matematika} byla vložena tímto způsobem.

\begin{table}\centering
	\caption[Příklad tabulky]{Zadávání matematiky}\label{tab:matematika}
	\begin{tabular}{|l|l|c|c|}\hline
		Typ		& Prostředí		& \LaTeX{}ovská zkratka	& \TeX{}ovská zkratka	\tabularnewline \hline \hline
		Text		& \verb|math|		& \verb|\(...\)|	& \verb|$...$|		\tabularnewline \hline
		Displayed	& \verb|displaymath|	& \verb|\[...\]|	& \verb|$$...$$|	\tabularnewline \hline
	\end{tabular}
\end{table}

\subsection{Literatura}

Vše, čeho nejste autorem (myšlenky, nápady, text, obrázky, \ldots) by mělo být řádně ocitováno -- pokud možno původní zdroj. Vzhledem k~charakteru této práce (odborná) upřednostňujte důvěryhodné a odborné zdroje (existuje-li tištěná verze, citujte raději tu). Důrazně se tedy \emph{vyvarujte citace z~Wikipedie} (kromě odůvodněných a nejnutnějších případů).

Citování (tedy přesné specifikování použitého informačního zdroje a také odkaz na něj z textu) je vhodné provést podobně jako v tomto textu, tedy v souladu s aktuálně platnou normou ČSN ISO 690 \cite{iso690}.

\subsection{Sazba URL}

Pro vkládání URL a podobných informací doporučujeme použít příkaz \verb|url| ze stejnojmenného balíčku. Zajistíte tím jednak odlišení adresy od ostatního textu pomocí jiného písma a také zalamování na konci řádku.

Chcete-li vkládat odkazy (funkční v~PDF), použijte příkaz \verb|href| z~balíčku \verb|hyperref|.

% % % % % % % % % % % % % % % % % % % % % % % % % % % 

\chapter{Obsah přiloženého CD}

\paragraph{Ahoj} \cite{sitova-karta-s-fpga-xilinx}

Vhodným způsobem vizualizujte obsah přiloženého média. Lze použít balíček \verb|dirtree| a vytvořit např. následující výstup (adresáře src a text s~příslušným obsahem jsou \emph{povinné}):

\begin{figure}
	\dirtree{%
		.1 readme.txt\DTcomment{stručný popis obsahu CD}.
		.1 exe\DTcomment{adresář se spustitelnou formou implementace}.
		.1 src.
		.2 impl\DTcomment{zdrojové kódy implementace}.
		.2 thesis\DTcomment{zdrojová forma práce ve formátu \LaTeX{}}.
		.1 text\DTcomment{text práce}.
		.2 thesis.pdf\DTcomment{text práce ve formátu PDF}.
	}
\end{figure}


\end{document}
